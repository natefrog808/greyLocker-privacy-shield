/**
 * GreyLocker Icon Generator
 * 
 * This script generates icon files at different sizes from the base SVG.
 * Requires Node.js and the Sharp library (npm install sharp).
 */

const fs = require('fs');
const path = require('path');
const sharp = require('sharp');

// Ensure assets/icons directory exists
const iconsDir = path.join(__dirname, 'assets', 'icons');
if (!fs.existsSync(iconsDir)) {
  fs.mkdirSync(iconsDir, { recursive: true });
}

// Path to the source SVG file
const svgPath = path.join(__dirname, 'greylocker-icon.svg');

// Output file paths
const outputPaths = {
  16: path.join(iconsDir, 'icon16.png'),
  48: path.join(iconsDir, 'icon48.png'),
  128: path.join(iconsDir, 'icon128.png')
};

// Check if the SVG file exists
if (!fs.existsSync(svgPath)) {
  console.error(`SVG file not found at ${svgPath}`);
  console.log('Please save the SVG code to this location first.');
  process.exit(1);
}

// Generate each icon size
async function generateIcons() {
  try {
    const sizes = [16, 48, 128];
    
    for (const size of sizes) {
      console.log(`Generating ${size}x${size} icon...`);
      
      await sharp(svgPath)
        .resize(size, size)
        .png()
        .toFile(outputPaths[size]);
      
      console.log(`Created ${outputPaths[size]}`);
    }
    
    console.log('All icons generated successfully!');
  } catch (error) {
    console.error('Error generating icons:', error);
  }
}

// Run the generator
generateIcons();
